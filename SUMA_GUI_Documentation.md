# SUMA GUI - תיעוד מקיף
## Signal Utility MRI Analysis - Professional GUI

---

## תוכן עניינים
1. [סקירה כללית](#סקירה-כללית)
2. [ארכיטקטורת המערכת](#ארכיטקטורת-המערכת)
3. [זרימת העבודה](#זרימת-העבודה)
4. [מסכי המערכת](#מסכי-המערכת)
5. [פונקציונליות מפורטת](#פונקציונליות-מפורטת)
6. [מפרט טכני](#מפרט-טכני)

---

## סקירה כללית

### מה זה SUMA?
SUMA (Signal Utility MRI Analysis) היא תוכנת שולחן עבודה מקצועית המיועדת לניתוח תמונות MRI ו-CT של מטופלים במחקרים קליניים. התוכנה מחשבת באופן אוטומטי:

- **TE₀** - זמן הדהוי הטבעי
- **צבירת ברזל** ברקמות
- **שינויים לאורך זמן** בין טיפולים

### מטרת התוכנה
התוכנה מיועדת לחוקרים ורופאים העוסקים במחקרים קליניים הבוחנים השפעות טיפולים על צבירת ברזל ברקמות המוח.

---

## ארכיטקטורת המערכת

### מבנה הקוד
```
suma_gui/
├── config/
│   └── constants.py          # קבועי המערכת
├── core/
│   └── signals.py           # מערכת signals מרכזית
├── resources/
│   ├── colors.py           # פלטת צבעים
│   ├── layer_colors.py     # צבעי שכבות תצוגה
│   └── styles.py           # ניהול סגנונות
└── ui/
    ├── components/
    │   └── base_widget.py  # מחלקת בסיס לכל רכיבי UI
    ├── dialogs/
    │   ├── start_analysis_dialog.py    # דיאלוג התחלת ניתוח
    │   └── view_results_dialog.py      # דיאלוג צפייה בתוצאות
    └── windows/
        ├── main_window.py              # חלון ראשי
        ├── results_viewer.py           # מציג תוצאות
        └── startup_screen.py           # מסך פתיחה
```

### עקרונות עיצוב
- **ארכיטקטורה מודולרית** - כל רכיב עצמאי ונפרד
- **ניהול סגנונות מרכזי** - כל הצבעים והסגנונות במקום אחד
- **מערכת signals** - תקשורת בין רכיבים באמצעות PyQt signals
- **עיצוב responsive** - התאמה לגדלי מסך שונים

---

## זרימת העבודה

### 1. התחלת הניתוח
```
מסך פתיחה → דיאלוג ניתוח חדש → הזנת פרטי מטופל → בחירת תיקיות → ביצוע ניתוח
```

### 2. צפייה בתוצאות
```
מסך פתיחה → דיאלוג צפייה בתוצאות → בחירת מטופל/טיפול → מציג תוצאות
```

### 3. ייצוא תוצאות
```
מציג תוצאות → כפתור Export PDF → יצירת דוח מקצועי
```

---

## מסכי המערכת

### 1. מסך הפתיחה (Startup Screen)

**תיאור:**
המסך הראשי של התוכנה המציג את לוגו SUMA ושני כפתורי פעולה עיקריים.

**רכיבים:**
- **כותרת ראשית:** "SUMA" בגופן גדול (96px) בצבע כחול כהה
- **כותרת משנה:** "Wellcome to Signal Utility MRI Analysis" בגופן בינוני (48px)
- **כפתור "Start Analysis"** - להתחלת ניתוח חדש
- **כפתור "View Results"** - לצפייה בתוצאות קיימות
- **Footer** - זכויות יוצרים ומידע על החברה

**פונקציונליות:**
- ניווט לדיאלוג ניתוח חדש
- ניווט לדיאלוג צפייה בתוצאות
- עיצוב מרכזי וידידותי למשתמש

### 2. דיאלוג התחלת ניתוח (Start Analysis Dialog)

**תיאור:**
דיאלוג מקיף לביצוע ניתוח חדש על נתוני מטופל.

**רכיבים:**
- **קבוצת פרטי מטופל:**
  - שדה Patient ID (מספר מטופל)
  - שדה Treatment ID (מספר טיפול)
- **קבוצת בחירת תיקיות:**
  - כפתור בחירת תיקיית MRI PRE
  - כפתור בחירת תיקיית MRI POST  
  - כפתור בחירת תיקיית CT
- **אזור התקדמות:**
  - Progress Bar עם התקדמות באחוזים
  - תצוגת סטטוס השלב הנוכחי
- **כפתורי פעולה:**
  - כפתור Cancel
  - כפתור "Load & Analyze"

**פונקציונליות:**
- **בדיקת תקינות קלטים** - הכפתור מופעל רק כשיש Patient ID ו-Treatment ID
- **השבתת רכיבים במהלך ניתוח** - כל השדות והכפתורים לא פעילים במהלך העבודה
- **התקדמות מפורטת** - Progress Bar מתקדם באחוזים עם תיאור כל שלב
- **ביצוע ברקע** - הניתוח רץ ב-Worker Thread נפרד
- **שלבי הניתוח:**
  1. Loading DICOM files (15%)
  2. Calculating TE₀ maps (25%)
  3. Performing image alignment (20%)
  4. Computing ΔTE₀ and ΔIron (25%)
  5. Generating reports (15%)

### 3. דיאלוג צפייה בתוצאות (View Results Dialog)

**תיאור:**
דיאלוג המציג רשימת מטופלים וטיפולים קיימים במערכת.

**רכיבים:**
- **כותרת:** "Analysis Results"
- **Tree Widget מובנה:**
  - רשימת מטופלים (Patient 001, Patient 002, וכו')
  - תחת כל מטופל - רשימת טיפולים
  - עמודות: Patient/Treatment, Date, Status
- **כפתורי פעולה:**
  - כפתור Close
  - כפתור "View Selected" (פעיל רק כשטיפול נבחר)

**פונקציונליות:**
- **תצוגה היררכית** - מטופלים עם טיפולים מתחתיהם
- **יישור שמאל** - כל הטקסט מיושר שמאל לקריאות טובה יותר
- **בחירה אינטראקטיבית** - לחיצה כפולה או כפתור View לצפייה
- **מידע מפורט** - תאריך וסטטוס לכל טיפול

### 4. מציג תוצאות (Results Viewer)

**תיאור:**
המסך הראשי לצפייה ועריכת תוצאות הניתוח.

**רכיבים:**
- **סרגל עליון:**
  - מידע על המטופל והטיפול
  - כפתור "Export PDF"
  - כפתור "Back"
- **פאנל מרכזי:**
  - אזור מוכן לאינטגרציה עם Napari viewer
  - תצוגת שכבות:
    - CT (grayscale)
    - PRE TE₁ (ירוק)
    - POST TE₁ (אדום)
    - PRE TE₀ (viridis)
    - POST TE₀ (plasma)
    - ΔTE₀ (coolwarm)
    - Iron (inferno)
- **בקרים:**
  - Slice slider לניווט בין חתכים
  - כפתור 3D toggle

**פונקציונליות:**
- **תצוגה רב-שכבתית** - הצגת כל השכבות בו-זמנית
- **ניווט בתמונות** - מעבר בין חתכים שונים
- **ייצוא PDF** - יצירת דוח מקצועי
- **אינטגרציה עם Napari** - כלי תצוגה מתקדם לתמונות רפואיות

---

## פונקציונליות מפורטת

### מערכת הצבעים
התוכנה משתמשת בפלטת צבעים מוגדרת:
- **כחול כהה (#004466)** - צבע מותג ראשי
- **כחול בהיר (#007acc)** - הדגשות וכפתורים
- **לבן (#FFFFFF)** - רקעים
- **אפור כהה (#333333)** - טקסט ראשי
- **אפור בהיר (#999999)** - טקסט משני

### מערכת ה-Signals
התוכנה משתמשת במערכת signals מרכזית:
- **ניווט:** מעבר בין מסכים
- **ניתוח:** התחלה, התקדמות וסיום
- **ייצוא:** בקשות ייצוא PDF

### עיבוד נתונים
התוכנה מעבדת:
- **קבצי DICOM** - תמונות רפואיות סטנדרטיות
- **חישובי TE₀** - זמני דהייה טבעיים
- **מיפוי ברזל** - זיהוי וכימות צבירת ברזל
- **השוואות זמניות** - חישוב שינויים בין טיפולים

---

## מפרט טכני

### דרישות מערכת
- **מערכת הפעלה:** Windows 10/11
- **Python:** 3.8+
- **זיכרון:** 8GB RAM מינימום
- **מקום פנוי:** 2GB לתוכנה ונתונים

### תלות טכנית
- **PyQt5** - ממשק משתמש
- **NumPy** - עיבוד מטריצות
- **Napari** - תצוגת תמונות (אינטגרציה עתידית)

### פורמטים נתמכים
- **.dcm** - קבצי DICOM
- **.json** - תוצאות ניתוח
- **.npz** - מטריצות NumPy
- **.pdf** - דוחות ייצוא

### ביצועים
- **ניתוח מהיר** - אלגוריתמים מותאמים
- **זיכרון יעיל** - ניהול זיכרון חכם
- **ממשק רספונסיבי** - עבודה ברקע עם Worker Threads

---

## סיכום

SUMA GUI היא תוכנה מקצועית ומתקדמת לניתוח תמונות רפואיות במחקרים קליניים. התוכנה מציעה:

✅ **ממשק אינטואיטיבי** - קל לשימוש לחוקרים ורופאים  
✅ **ניתוח אוטומטי** - חישובים מדויקים ללא התדחלות  
✅ **תצוגה מתקדמת** - הצגת תוצאות בכלים מקצועיים  
✅ **ייצוא מקצועי** - דוחות PDF מוכנים לפרסום  
✅ **ארכיטקטורה גמישה** - קל להרחבה ושיפור  

התוכנה מהווה כלי חיוני למחקרים קליניים העוסקים בצבירת ברזל ובהשפעות טיפולים על רקמות המוח.

---

**© 2025 New Phase Ltd. - For internal research use only** 